<!-- rule.mdを読むこと -->
<Window
    x:Class="nanobananaWindows.Views.Settings.InfographicSettingsWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Grid Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- メインコンテンツ -->
        <ScrollViewer Grid.Row="0" VerticalScrollBarVisibility="Auto" Padding="24,16,24,16">
            <StackPanel Spacing="16" MinWidth="650">
                <!-- スタイル・言語設定 -->
                <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                        CornerRadius="4" Padding="12">
                    <StackPanel Spacing="8">
                        <TextBlock Text="スタイル・言語設定" FontWeight="SemiBold"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="80"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <TextBlock Text="スタイル:" VerticalAlignment="Center" Grid.Row="0"/>
                            <ComboBox x:Name="InfographicStyleComboBox"
                                      HorizontalAlignment="Stretch"
                                      Grid.Row="0" Grid.Column="1" Margin="0,4"
                                      SelectionChanged="InfographicStyleComboBox_SelectionChanged"/>

                            <TextBlock Text="言語:" VerticalAlignment="Center" Grid.Row="1"/>
                            <ComboBox x:Name="OutputLanguageComboBox"
                                      HorizontalAlignment="Stretch"
                                      Grid.Row="1" Grid.Column="1" Margin="0,4"
                                      SelectionChanged="OutputLanguageComboBox_SelectionChanged"/>

                            <TextBlock Text="カスタム:" VerticalAlignment="Center" Grid.Row="2"
                                       x:Name="CustomLanguageLabel" Visibility="Collapsed"/>
                            <TextBox x:Name="CustomLanguageTextBox"
                                     PlaceholderText="言語を入力..."
                                     Grid.Row="2" Grid.Column="1" Margin="0,4"
                                     Visibility="Collapsed"
                                     TextChanged="CustomLanguageTextBox_TextChanged"/>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- タイトル設定 -->
                <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                        CornerRadius="4" Padding="12">
                    <StackPanel Spacing="8">
                        <TextBlock Text="タイトル設定" FontWeight="SemiBold"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="100"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <TextBlock Text="メインタイトル:" VerticalAlignment="Center" Grid.Row="0"/>
                            <TextBox x:Name="MainTitleTextBox"
                                     PlaceholderText="例：彩瀬翔子のすべて"
                                     Grid.Row="0" Grid.Column="1" Margin="0,4"
                                     TextChanged="MainTitleTextBox_TextChanged"/>

                            <TextBlock Text="サブタイトル:" VerticalAlignment="Center" Grid.Row="1"/>
                            <TextBox x:Name="SubtitleTextBox"
                                     PlaceholderText="例：〜知られざる一面〜"
                                     Grid.Row="1" Grid.Column="1" Margin="0,4"
                                     TextChanged="SubtitleTextBox_TextChanged"/>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- キャラクター画像 -->
                <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                        CornerRadius="4" Padding="12">
                    <StackPanel Spacing="8">
                        <TextBlock Text="キャラクター画像" FontWeight="SemiBold"/>

                        <!-- メインキャラクター -->
                        <StackPanel Spacing="4">
                            <TextBlock Text="メインキャラクター（必須）:" FontSize="12"/>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBox x:Name="MainCharacterImagePathTextBox"
                                         PlaceholderText="画像ファイルをドロップ、またはパスを入力..."
                                         AllowDrop="True"
                                         DragOver="ImagePathTextBox_DragOver"
                                         Drop="MainCharacterImagePathTextBox_Drop"
                                         TextChanged="MainCharacterImagePathTextBox_TextChanged"
                                         Grid.Column="0"/>
                                <Button Content="参照..."
                                        Click="BrowseMainCharacterButton_Click"
                                        Margin="8,0,0,0"
                                        Grid.Column="1"/>
                            </Grid>
                            <TextBlock Text="中央に配置されるキャラクター画像" FontSize="11"
                                       Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                        </StackPanel>

                        <!-- ボーナスキャラクター -->
                        <StackPanel Spacing="4">
                            <TextBlock Text="ボーナスキャラクター（任意）:" FontSize="12"/>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBox x:Name="SubCharacterImagePathTextBox"
                                         PlaceholderText="ちびキャラなど、装飾用..."
                                         AllowDrop="True"
                                         DragOver="ImagePathTextBox_DragOver"
                                         Drop="SubCharacterImagePathTextBox_Drop"
                                         TextChanged="SubCharacterImagePathTextBox_TextChanged"
                                         Grid.Column="0"/>
                                <Button Content="参照..."
                                        Click="BrowseSubCharacterButton_Click"
                                        Margin="8,0,0,0"
                                        Grid.Column="1"/>
                            </Grid>
                            <TextBlock Text="ちびキャラ版などを装飾として配置" FontSize="11"
                                       Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- セクション設定 -->
                <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                        CornerRadius="4" Padding="12">
                    <StackPanel Spacing="8">
                        <TextBlock Text="情報セクション（8項目）" FontWeight="SemiBold"/>
                        <TextBlock Text="キャラクターの周囲に配置される情報を設定"
                                   FontSize="12" Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                        <StackPanel x:Name="SectionsContainer" Spacing="8">
                            <!-- セクションは動的に生成 -->
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- 注意事項 -->
                <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                        CornerRadius="4" Padding="12">
                    <StackPanel Spacing="4">
                        <TextBlock Text="出力について" FontWeight="SemiBold" FontSize="12"/>
                        <TextBlock Text="• キャラクター画像が中央に配置されます" FontSize="12"
                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                        <TextBlock Text="• 周囲にセクション情報が配置されます" FontSize="12"
                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                        <TextBlock Text="• 空欄のセクションは出力されません" FontSize="12"
                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                        <TextBlock Text="※ この機能は実験的なため、今後変更される可能性があります"
                                   FontSize="11" Foreground="Orange"/>
                    </StackPanel>
                </Border>
            </StackPanel>
        </ScrollViewer>

        <!-- ボタンエリア -->
        <Border Grid.Row="1"
                Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                BorderThickness="0,1,0,0"
                Padding="24,12">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Spacing="8">
                <Button x:Name="ApplyButton" Content="適用" Style="{StaticResource AccentButtonStyle}"
                        Click="ApplyButton_Click" Width="100"/>
                <Button x:Name="CancelButton" Content="キャンセル"
                        Click="CancelButton_Click" Width="100"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>
