<!-- rule.mdを読むこと -->
<Window
    x:Class="nanobananaWindows.Views.Settings.StyleTransformSettingsWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Grid Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- メインコンテンツ -->
        <ScrollViewer Grid.Row="0" VerticalScrollBarVisibility="Auto" Padding="24,16,24,16">
            <StackPanel Spacing="16" MinWidth="500">
                <!-- 元画像 -->
                <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                        CornerRadius="4" Padding="12">
                    <StackPanel Spacing="8">
                        <TextBlock Text="元画像" FontWeight="SemiBold"/>
                        <TextBlock Text="変換したいキャラクター画像を指定"
                                   FontSize="12" Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <TextBox x:Name="SourceImagePathTextBox"
                                     PlaceholderText="画像ファイルをドロップ、またはパスを入力..."
                                     AllowDrop="True"
                                     DragOver="ImagePathTextBox_DragOver"
                                     Drop="SourceImagePathTextBox_Drop"
                                     TextChanged="SourceImagePathTextBox_TextChanged"
                                     Grid.Column="0"/>
                            <Button x:Name="BrowseSourceButton"
                                    Content="参照..."
                                    Click="BrowseSourceButton_Click"
                                    Margin="8,0,0,0"
                                    Grid.Column="1"/>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- 変換タイプ選択 -->
                <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                        CornerRadius="4" Padding="12">
                    <StackPanel Spacing="8">
                        <TextBlock Text="変換タイプ" FontWeight="SemiBold"/>
                        <StackPanel Orientation="Horizontal" Spacing="16">
                            <RadioButton x:Name="ChibiModeRadio"
                                         Content="ちびキャラ化"
                                         IsChecked="True"
                                         Checked="TransformTypeRadio_Checked"/>
                            <RadioButton x:Name="PixelModeRadio"
                                         Content="ドットキャラ化"
                                         Checked="TransformTypeRadio_Checked"/>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- ちびキャラ化設定 -->
                <StackPanel x:Name="ChibiSection" Spacing="12">
                    <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                            CornerRadius="4" Padding="12">
                        <StackPanel Spacing="8">
                            <TextBlock Text="ちびキャラ設定" FontWeight="SemiBold"/>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="80"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="スタイル:" VerticalAlignment="Center"/>
                                <ComboBox x:Name="ChibiStyleComboBox"
                                          HorizontalAlignment="Stretch"
                                          Grid.Column="1"
                                          SelectionChanged="ChibiStyleComboBox_SelectionChanged"/>
                            </Grid>
                            <TextBlock Text="• 2頭身：超デフォルメ、大きな頭と小さな体" FontSize="12"
                                       Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                            <TextBlock Text="• 3頭身：やや緩めのデフォルメ" FontSize="12"
                                       Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                            <TextBlock Text="• ねんどろいど風：フィギュア風の光沢感" FontSize="12"
                                       Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                            <TextBlock Text="• マスコット風：極端に簡略化された丸い形" FontSize="12"
                                       Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                        </StackPanel>
                    </Border>
                </StackPanel>

                <!-- ドットキャラ化設定 -->
                <StackPanel x:Name="PixelSection" Spacing="12" Visibility="Collapsed">
                    <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                            CornerRadius="4" Padding="12">
                        <StackPanel Spacing="8">
                            <TextBlock Text="ドットキャラ設定" FontWeight="SemiBold"/>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="80"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <TextBlock Text="スタイル:" VerticalAlignment="Center" Grid.Row="0"/>
                                <ComboBox x:Name="PixelStyleComboBox"
                                          HorizontalAlignment="Stretch"
                                          Grid.Row="0" Grid.Column="1" Margin="0,4"
                                          SelectionChanged="PixelStyleComboBox_SelectionChanged"/>

                                <TextBlock Text="サイズ:" VerticalAlignment="Center" Grid.Row="1"/>
                                <ComboBox x:Name="SpriteSizeComboBox"
                                          HorizontalAlignment="Stretch"
                                          Grid.Row="1" Grid.Column="1" Margin="0,4"
                                          SelectionChanged="SpriteSizeComboBox_SelectionChanged"/>
                            </Grid>
                            <TextBlock Text="• 8bit風：ファミコン時代の限られた色数" FontSize="12"
                                       Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                            <TextBlock Text="• 16bit風：スーファミ時代の鮮やかな色彩" FontSize="12"
                                       Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                            <TextBlock Text="• モダンピクセル：高解像度ピクセルアート" FontSize="12"
                                       Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                        </StackPanel>
                    </Border>
                </StackPanel>

                <!-- 共通オプション -->
                <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                        CornerRadius="4" Padding="12">
                    <StackPanel Spacing="8">
                        <TextBlock Text="出力オプション" FontWeight="SemiBold"/>
                        <CheckBox x:Name="TransparentBackgroundCheckBox"
                                  Content="背景を透過にする（合成用）"
                                  IsChecked="True"
                                  Checked="TransparentBackgroundCheckBox_Changed"
                                  Unchecked="TransparentBackgroundCheckBox_Changed"/>
                    </StackPanel>
                </Border>

                <!-- 制約事項 -->
                <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                        CornerRadius="4" Padding="12">
                    <StackPanel Spacing="4">
                        <TextBlock Text="変換時の制約" FontWeight="SemiBold" FontSize="12"/>
                        <TextBlock Text="• 衣装・ポーズは維持されます" FontSize="12"
                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                        <TextBlock Text="• 色合いは可能な限り維持されます" FontSize="12"
                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                        <TextBlock Text="• キャラクターの特徴は保持されます" FontSize="12"
                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                    </StackPanel>
                </Border>
            </StackPanel>
        </ScrollViewer>

        <!-- ボタンエリア -->
        <Border Grid.Row="1"
                Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                BorderThickness="0,1,0,0"
                Padding="24,12">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Spacing="8">
                <Button x:Name="ApplyButton" Content="適用" Style="{StaticResource AccentButtonStyle}"
                        Click="ApplyButton_Click" Width="100"/>
                <Button x:Name="CancelButton" Content="キャンセル"
                        Click="CancelButton_Click" Width="100"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>
