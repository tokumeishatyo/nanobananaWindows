<!-- rule.mdを読むこと -->
<Window
    x:Class="nanobananaWindows.Views.Settings.DecorativeTextSettingsWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Grid Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- メインコンテンツ -->
        <ScrollViewer Grid.Row="0" VerticalScrollBarVisibility="Auto" Padding="24,16,24,16">
            <StackPanel Spacing="16" MinWidth="600">
                <!-- テキストタイプ選択 -->
                <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                        CornerRadius="4" Padding="12">
                    <StackPanel Spacing="8">
                        <TextBlock Text="テキストタイプ" FontWeight="SemiBold"/>
                        <StackPanel Orientation="Horizontal" Spacing="16">
                            <RadioButton x:Name="SkillNameRadio" Content="技名テロップ"
                                         GroupName="TextType" IsChecked="True"
                                         Checked="TextTypeRadio_Checked"/>
                            <RadioButton x:Name="CatchphraseRadio" Content="決め台詞"
                                         GroupName="TextType"
                                         Checked="TextTypeRadio_Checked"/>
                            <RadioButton x:Name="NamePlateRadio" Content="キャラ名プレート"
                                         GroupName="TextType"
                                         Checked="TextTypeRadio_Checked"/>
                            <RadioButton x:Name="MessageWindowRadio" Content="メッセージウィンドウ"
                                         GroupName="TextType"
                                         Checked="TextTypeRadio_Checked"/>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- テキスト入力（共通） -->
                <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                        CornerRadius="4" Padding="12">
                    <StackPanel Spacing="8">
                        <TextBlock Text="テキスト内容" FontWeight="SemiBold"/>
                        <TextBlock x:Name="TextPlaceholderHint" Text=""
                                   FontSize="12" Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                        <TextBox x:Name="TextContentTextBox"
                                 PlaceholderText=""
                                 TextWrapping="Wrap"
                                 AcceptsReturn="True"
                                 Height="60"
                                 TextChanged="TextContentTextBox_TextChanged"/>
                        <CheckBox x:Name="TransparentBackgroundCheckBox"
                                  Content="背景を透過にする（合成用）"
                                  IsChecked="True"
                                  Checked="TransparentBackgroundCheckBox_Changed"
                                  Unchecked="TransparentBackgroundCheckBox_Changed"/>
                    </StackPanel>
                </Border>

                <!-- 技名テロップ設定 -->
                <StackPanel x:Name="SkillNameSection" Spacing="12">
                    <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                            CornerRadius="4" Padding="12">
                        <StackPanel Spacing="8">
                            <TextBlock Text="技名テロップ設定" FontWeight="SemiBold"/>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="80"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <TextBlock Text="フォント:" VerticalAlignment="Center" Grid.Row="0"/>
                                <ComboBox x:Name="TitleFontComboBox" HorizontalAlignment="Stretch" Grid.Row="0" Grid.Column="1" Margin="0,4"
                                          SelectionChanged="TitleFontComboBox_SelectionChanged"/>

                                <TextBlock Text="サイズ:" VerticalAlignment="Center" Grid.Row="1"/>
                                <ComboBox x:Name="TitleSizeComboBox" HorizontalAlignment="Stretch" Grid.Row="1" Grid.Column="1" Margin="0,4"
                                          SelectionChanged="TitleSizeComboBox_SelectionChanged"/>

                                <TextBlock Text="塗り色:" VerticalAlignment="Center" Grid.Row="2"/>
                                <ComboBox x:Name="TitleColorComboBox" HorizontalAlignment="Stretch" Grid.Row="2" Grid.Column="1" Margin="0,4"
                                          SelectionChanged="TitleColorComboBox_SelectionChanged"/>

                                <TextBlock Text="縁取り:" VerticalAlignment="Center" Grid.Row="3"/>
                                <ComboBox x:Name="TitleOutlineComboBox" HorizontalAlignment="Stretch" Grid.Row="3" Grid.Column="1" Margin="0,4"
                                          SelectionChanged="TitleOutlineComboBox_SelectionChanged"/>

                                <TextBlock Text="発光:" VerticalAlignment="Center" Grid.Row="4"/>
                                <ComboBox x:Name="TitleGlowComboBox" HorizontalAlignment="Stretch" Grid.Row="4" Grid.Column="1" Margin="0,4"
                                          SelectionChanged="TitleGlowComboBox_SelectionChanged"/>
                            </Grid>
                        </StackPanel>
                    </Border>
                </StackPanel>

                <!-- 決め台詞設定 -->
                <StackPanel x:Name="CatchphraseSection" Spacing="12" Visibility="Collapsed">
                    <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                            CornerRadius="4" Padding="12">
                        <StackPanel Spacing="8">
                            <TextBlock Text="決め台詞設定" FontWeight="SemiBold"/>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="80"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <TextBlock Text="タイプ:" VerticalAlignment="Center" Grid.Row="0"/>
                                <ComboBox x:Name="CalloutTypeComboBox" HorizontalAlignment="Stretch" Grid.Row="0" Grid.Column="1" Margin="0,4"
                                          SelectionChanged="CalloutTypeComboBox_SelectionChanged"/>

                                <TextBlock Text="配色:" VerticalAlignment="Center" Grid.Row="1"/>
                                <ComboBox x:Name="CalloutColorComboBox" HorizontalAlignment="Stretch" Grid.Row="1" Grid.Column="1" Margin="0,4"
                                          SelectionChanged="CalloutColorComboBox_SelectionChanged"/>

                                <TextBlock Text="回転:" VerticalAlignment="Center" Grid.Row="2"/>
                                <ComboBox x:Name="CalloutRotationComboBox" HorizontalAlignment="Stretch" Grid.Row="2" Grid.Column="1" Margin="0,4"
                                          SelectionChanged="CalloutRotationComboBox_SelectionChanged"/>

                                <TextBlock Text="変形:" VerticalAlignment="Center" Grid.Row="3"/>
                                <ComboBox x:Name="CalloutDistortionComboBox" HorizontalAlignment="Stretch" Grid.Row="3" Grid.Column="1" Margin="0,4"
                                          SelectionChanged="CalloutDistortionComboBox_SelectionChanged"/>
                            </Grid>
                        </StackPanel>
                    </Border>
                </StackPanel>

                <!-- キャラ名プレート設定 -->
                <StackPanel x:Name="NamePlateSection" Spacing="12" Visibility="Collapsed">
                    <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                            CornerRadius="4" Padding="12">
                        <StackPanel Spacing="8">
                            <TextBlock Text="キャラ名プレート設定" FontWeight="SemiBold"/>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="80"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <TextBlock Text="デザイン:" VerticalAlignment="Center" Grid.Row="0"/>
                                <ComboBox x:Name="NameTagDesignComboBox" HorizontalAlignment="Stretch" Grid.Row="0" Grid.Column="1" Margin="0,4"
                                          SelectionChanged="NameTagDesignComboBox_SelectionChanged"/>

                                <TextBlock Text="回転:" VerticalAlignment="Center" Grid.Row="1"/>
                                <ComboBox x:Name="NameTagRotationComboBox" HorizontalAlignment="Stretch" Grid.Row="1" Grid.Column="1" Margin="0,4"
                                          SelectionChanged="NameTagRotationComboBox_SelectionChanged"/>
                            </Grid>
                        </StackPanel>
                    </Border>
                </StackPanel>

                <!-- メッセージウィンドウ設定 -->
                <StackPanel x:Name="MessageWindowSection" Spacing="12" Visibility="Collapsed">
                    <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                            CornerRadius="4" Padding="12">
                        <StackPanel Spacing="8">
                            <TextBlock Text="メッセージウィンドウ設定" FontWeight="SemiBold"/>

                            <!-- モード -->
                            <StackPanel Spacing="4">
                                <TextBlock Text="モード:" FontSize="12"/>
                                <ComboBox x:Name="MessageModeComboBox" HorizontalAlignment="Stretch"
                                          SelectionChanged="MessageModeComboBox_SelectionChanged"/>
                            </StackPanel>

                            <!-- 話者名 -->
                            <StackPanel Spacing="4">
                                <TextBlock Text="話者名:" FontSize="12"/>
                                <TextBox x:Name="SpeakerNameTextBox"
                                         PlaceholderText="例：彩瀬翔子"
                                         TextChanged="SpeakerNameTextBox_TextChanged"/>
                            </StackPanel>

                            <!-- スタイル -->
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="80"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <TextBlock Text="スタイル:" VerticalAlignment="Center" Grid.Row="0"/>
                                <ComboBox x:Name="MessageStyleComboBox" HorizontalAlignment="Stretch" Grid.Row="0" Grid.Column="1" Margin="0,4"
                                          SelectionChanged="MessageStyleComboBox_SelectionChanged"/>

                                <TextBlock Text="枠タイプ:" VerticalAlignment="Center" Grid.Row="1"/>
                                <ComboBox x:Name="MessageFrameTypeComboBox" HorizontalAlignment="Stretch" Grid.Row="1" Grid.Column="1" Margin="0,4"
                                          SelectionChanged="MessageFrameTypeComboBox_SelectionChanged"/>

                                <TextBlock Text="透過度:" VerticalAlignment="Center" Grid.Row="2"/>
                                <Slider x:Name="MessageOpacitySlider" Minimum="0" Maximum="1" Value="0.8"
                                        Grid.Row="2" Grid.Column="1" Margin="0,4"
                                        ValueChanged="MessageOpacitySlider_ValueChanged"/>
                            </Grid>

                            <!-- 顔アイコン -->
                            <StackPanel Spacing="4">
                                <TextBlock Text="顔アイコン:" FontSize="12"/>
                                <ComboBox x:Name="FaceIconPositionComboBox" HorizontalAlignment="Stretch"
                                          SelectionChanged="FaceIconPositionComboBox_SelectionChanged"/>
                                <Grid x:Name="FaceIconImagePanel">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBox x:Name="FaceIconImagePathTextBox"
                                             PlaceholderText="顔アイコン画像のパス..."
                                             AllowDrop="True"
                                             DragOver="ImagePathTextBox_DragOver"
                                             Drop="FaceIconImagePathTextBox_Drop"
                                             TextChanged="FaceIconImagePathTextBox_TextChanged"
                                             Grid.Column="0"/>
                                    <Button x:Name="BrowseFaceIconButton"
                                            Content="参照..."
                                            Click="BrowseFaceIconButton_Click"
                                            Margin="8,0,0,0"
                                            Grid.Column="1"/>
                                </Grid>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </StackPanel>
        </ScrollViewer>

        <!-- ボタンエリア -->
        <Border Grid.Row="1"
                Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                BorderThickness="0,1,0,0"
                Padding="24,12">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Spacing="8">
                <Button x:Name="ApplyButton" Content="適用" Style="{StaticResource AccentButtonStyle}"
                        Click="ApplyButton_Click" Width="100"/>
                <Button x:Name="CancelButton" Content="キャンセル"
                        Click="CancelButton_Click" Width="100"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>
