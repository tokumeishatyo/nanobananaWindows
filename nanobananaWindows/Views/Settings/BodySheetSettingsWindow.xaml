<!-- rule.mdを読むこと -->
<Window
    x:Class="nanobananaWindows.Views.Settings.BodySheetSettingsWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Grid Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- メインコンテンツ -->
        <ScrollViewer Grid.Row="0" VerticalScrollBarVisibility="Auto" Padding="24,16,24,16">
            <StackPanel Spacing="16" MinWidth="450">
                <!-- 顔三面図の画像パス（必須） -->
                <StackPanel Spacing="4">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="顔三面図の画像パス" FontWeight="SemiBold"/>
                        <TextBlock Text=" *" Foreground="Red" FontWeight="SemiBold"/>
                    </StackPanel>
                    <TextBlock Text="※Step1で生成した顔三面図を指定"
                               FontSize="12" Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <TextBox x:Name="FaceSheetImagePathTextBox"
                                 PlaceholderText="画像をドロップ、またはパスを入力..."
                                 AllowDrop="True"
                                 DragOver="ImagePathTextBox_DragOver"
                                 Drop="FaceSheetImagePathTextBox_Drop"
                                 TextChanged="FaceSheetImagePathTextBox_TextChanged"
                                 Grid.Column="0"/>
                        <Button x:Name="BrowseFaceSheetButton"
                                Content="参照..."
                                Click="BrowseFaceSheetButton_Click"
                                Margin="8,0,0,0"
                                Grid.Column="1"/>
                    </Grid>
                </StackPanel>

                <!-- 体型プリセット -->
                <StackPanel Spacing="4">
                    <TextBlock Text="体型プリセット" FontWeight="SemiBold"/>
                    <ComboBox x:Name="BodyTypePresetComboBox"
                              HorizontalAlignment="Stretch"
                              SelectionChanged="BodyTypePresetComboBox_SelectionChanged"/>
                </StackPanel>

                <!-- バスト特徴 -->
                <StackPanel Spacing="4">
                    <TextBlock Text="バスト特徴" FontWeight="SemiBold"/>
                    <ComboBox x:Name="BustFeatureComboBox"
                              HorizontalAlignment="Stretch"
                              SelectionChanged="BustFeatureComboBox_SelectionChanged"/>
                </StackPanel>

                <!-- 素体表現タイプ -->
                <StackPanel Spacing="4">
                    <TextBlock Text="素体表現タイプ" FontWeight="SemiBold"/>
                    <ComboBox x:Name="BodyRenderTypeComboBox"
                              HorizontalAlignment="Stretch"
                              SelectionChanged="BodyRenderTypeComboBox_SelectionChanged"/>
                </StackPanel>

                <!-- 追加説明 -->
                <StackPanel Spacing="4">
                    <TextBlock Text="追加説明" FontWeight="SemiBold"/>
                    <TextBlock Text="体型や特徴について補足があれば入力"
                               FontSize="12" Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                    <TextBox x:Name="AdditionalDescriptionTextBox"
                             PlaceholderText="例: 長い脚、広い肩幅..."
                             TextWrapping="Wrap"
                             AcceptsReturn="True"
                             Height="80"
                             TextChanged="AdditionalDescriptionTextBox_TextChanged"/>
                </StackPanel>

                <!-- 制約事項 -->
                <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                        CornerRadius="4" Padding="12">
                    <StackPanel Spacing="4">
                        <TextBlock Text="制約事項" FontWeight="SemiBold" FontSize="12"/>
                        <TextBlock Text="• 顔三面図の画像が必須です" FontSize="12"
                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                        <TextBlock Text="• 体型は顔三面図と整合性を保ってください" FontSize="12"
                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                    </StackPanel>
                </Border>
            </StackPanel>
        </ScrollViewer>

        <!-- ボタンエリア -->
        <Border Grid.Row="1"
                Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                BorderThickness="0,1,0,0"
                Padding="24,12">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Spacing="8">
                <Button x:Name="ApplyButton" Content="適用" Style="{StaticResource AccentButtonStyle}"
                        Click="ApplyButton_Click" Width="100"/>
                <Button x:Name="CancelButton" Content="キャンセル"
                        Click="CancelButton_Click" Width="100"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>
